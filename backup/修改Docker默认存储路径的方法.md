转自:
(https://developer.baidu.com/article/details/2805112)
关注
简介：本文将介绍如何修改Docker的默认存储路径，使用“data-root“配置选项替代过时的“graph“选项。我们将通过编辑Docker的配置文件来实现这一目标，并解释为什么需要这样做。

在早期的Docker版本中，可以使用“graph“配置选项来指定默认的[存储]路径。然而，随着Docker的发展，这个选项已经被视为过时，并被“data-root“选项所取代。在本篇文章中，我们将介绍如何修改Docker的默认存储路径，以使用“data-root“选项。
首先，我们需要找到Docker的配置文件。这个文件通常位于Docker的安装目录中，路径可能是“/etc/docker/daemon.json“或者类似的路径。请根据你的系统和安装方式的不同进行调整。
接下来，我们需要编辑这个配置文件。你可以使用任何文本编辑器来完成这个任务，比如vim、nano或者gedit。下面是一个示例的配置文件内容：


```javascript
// A simple function
{
"data-root": "/new/path/for/docker"
}
```



在上面的示例中，我们将默认的存储路径修改为“/new/path/for/docker“。你需要将这个路径替换为你想要的实际路径。
保存并关闭配置文件后，我们需要重启Docker服务以使更改生效。你可以使用以下命令来重启Docker服务（取决于你的操作系统和Docker的安装方式）：
对于Ubuntu或者其他使用systemd的Linux发行版：

systemctl restart docker
对于CentOS或者其他使用init.d的Linux发行版：

/etc/init.d/docker restart
重启Docker服务后，默认的存储路径就已经被修改为新的路径了。请注意，这个操作可能会影响已经存在的容器和镜像，因此请谨慎操作。
为什么需要修改默认的存储路径呢？随着Docker的使用越来越多，默认的存储路径可能会被填满，导致容器无法正常运行。通过修改默认的存储路径，你可以将数据保存在容量更大的磁盘上，从而避免存储空间不足的问题。此外，将数据保存在定制的存储路径上可以提高[安全]性，因为你可以限制对数据的访问权限。
另外，需要注意的是，如果你的系统中已经存在容器和镜像，修改默认存储路径可能会导致问题。因此，建议在执行此操作之前备份好重要的容器和镜像数据。如果你不确定如何备份数据，可以查阅Docker官方[文档]或者寻求专业人士的帮助。
总结起来，通过修改Docker的默认存储路径，我们可以提高安全性、避免存储空间不足的问题，并更好地管理容器和镜像数据。在执行此操作时，请务必谨慎操作并备份好重要的数据。如果你在操作过程中遇到任何问题，可以查阅Docker官方文档或者寻求专业人士的帮助。